##操作系统简介
操作系统是计算机硬件的守护者，综合管理的计算机的所有硬件和软件资源，为使用者提供必要的编程接口和用户界面。如果没有操作系统，计算机就是一堆废铁不能为我所用。操作系统是整个IT产业链的最重要的基础设施之一，透彻的领悟、理解和使用操作系统对一个计算机行业的从业者尤其是码农的重要技能之一。
操作系统的主要功能包括内存管理、进程管理、网络通信、文件系统、用户界面、驱动、安全机制等。
##基础知识
####BIOS的历史
各种CPU都设计成一加电就从某一个特殊位置开始执行指令，这个特殊位置的程序通常有硬件开发厂商（例如主板厂商）开发并固化到EPROM等不挥发的存储设备中。随着技术的发展，EPROM越来越大，为加强系统初始引导程序提供了条件，所以在其中逐步加入了加电自检、系统配置等一类的功能，BIOS的UI也得到改善。到微软为IBM PC开发DOS操作系统时，更是把整个设备驱动程序都放到了EPROM中，成为基本输入输出系统即BIOS。
引用自Linux内核源代码情景分析第10章系统引导和初始化。
####实模式和保护模式
所谓实模式，是指程序中使用的地址直接对应内存的物理地址，不经过转换（也就意味着实模式下没有硬件级别的内存保护）。实模式可以使用20位的地址总线，意味着可以访问2的20次幂也就是1M地址空间，这个地址空间包括物理内存和BIOS ROM。1M的地址空间组成由16位的段地址和16位的段内偏移地址构成，公式表示为物理地址=段地址左移四位+偏移地址。在实模式下每个段的段长为2的16次幂为64K。
保护模式，也称作虚地址保护模式。真正的实地址保护模式开始于80386，为了和80286以前的CPU兼容，现代的X86系列的CPU开始也是默认工作在实模式下。在保护模式下，每个段的段长可以是任意的，最大可以到4GB。
在保护模式下段是通过被称为“描述符表”的结构所定义的，用于定义内存段的表有2中，全局描述符表GDT和局部描述符表LDT。与GDT不同，LDT是一个段，其中存放的是局部的、不需要全局共享的段描述符。每一个操作系统都必须定义一个GDT，而每一个正在运行的任务都会有一个相应的LDT。
####实模式下的分段和分页机制
80286的地址总线有20位，也就说可以定位也就是1M的内存空间，而在实模式下寄存器只有16位，只能存放上限为64K的内存地址，在这种情况下CPU没有办法使用全部的1M内存空间，怎么办呢？聪明的Intel的大叔们想出了一个办法：采用内存分段的机制。
####中断机制
计算机有很多外围设备，如键盘、鼠标、网卡等，CPU要统一的管理和协调这些资源，跟这些设备进行通信。通常有2种思路，一种是CPU定时轮询，查看是否有设备有数据需要处理。这种方式CPU将浪费大量的时间在无谓的循环上。另外一种方式就是引入中断机制，当设备有数据需要处理时通过8259A芯片发送给CPU，CPU在每个周期的末尾通过硬件来检测是否有中断到来(这个检测速度非常快，消耗的时间通常可以忽略)。
那么操作系统和CPU是如何处理中断呢？简单的说就是当CPU检测到有中断信号时，顺便检测是那个芯片的引脚发送过来的，每个引脚的中断信号都有一个唯一的编号。当确定了中断信号和中断的编号后，CPU将中断当前进程的执行，保护现场后，跳转到中断描述符中找到的处理程序中执行，中断处理程序执行完成后返回到先前中断的进程继续执行。
##系统的启动和加载
这一章我们主要介绍计算机的启动过程和系统的加载。
系统的启动是指按下电源键后到成功将内核从硬盘加载到内存中，并切换到32位安全模式开始执行内核的整个过程。
当按下计算机的power键的时候，80X86结构的CPU将进入实模式（实模式只支持16位，也就是说BIOS还是在16位基础上运行,此时CS为0xffff,IP为0），并且从地址0XFFFF0开始执行。这个地址通常是ROM-BIOS的地址，我们按下开机键后显示器上显示的第一个闪屏就是BIOS程序的执行的显示信息。BIOS通常会执行某些检测，并且从内存物理地址的0处初始化中断向量。然后BIOS将启动设备的第一个扇区读取到内存的0X7c00处，这个扇区通常是512字节，并且扇区的数据以0x55,0xaa结尾。由于引导扇区的大小为512字节，远远小于一个操作系统的占用空间的大小，所以我们通常把这512字节作为一个引导程序，引导程序加载操作系统加载程序，然后由加载程序将操作系统内核加载到内存中。

##参考资料
Linux内核完全注释V3.0  赵炯编著
Linux内核源代码情景分析  毛德操 胡希明 著
30天自制操作系统 川合秀实著  周自恒 李黎明 曾祥红 张文旭译
Linux0.01内核分析和操作系统设计 -创作你自己的操作系统 卢军编著
linux-insides
实模式和保护模式 http://blog.csdn.net/zdwzzu2006/article/details/4030948
 
